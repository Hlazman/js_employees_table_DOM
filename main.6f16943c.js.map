{"version":3,"sources":["scripts/main.js"],"names":["employeeForm","document","createElement","classList","add","innerHTML","body","append","sorted","sortColumn","tableBody","querySelector","heads","querySelectorAll","arrTable","getRows","splice","length","children","forEach","row","push","name","innerText","position","office","age","salary","sortTable","sortedBy","target","textContent","sort","a","b","localeCompare","parseFloat","slice","reverse","index","item","closest","addEventListener","e","remove","parentElement","isValid","pushNotification","title","description","type","posTop","posRight","block","header","text","setAttribute","style","fontSize","top","right","setTimeout","focusInvalidField","field","firstElementChild","outlineColor","focus","validateForm","data","get","FormData","salaryResult","Number","toLocaleString","preventDefault","newRow","insertRow","insertCell","split","join","reset","validCell","cells","indexCompare","changeCellOnInput","prev","cellWidth","getComputedStyle","width","cellIndex","value","editCells","el","newText","validateCell","input","getValidCell","border","saveChangesToTable","cell","prevText","ev","key","blur"],"mappings":"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","file":"main.6f16943c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// ================= ADDING FORM ON PAGE =================\nconst employeeForm = document.createElement('form');\n\nemployeeForm.classList.add('new-employee-form');\n\nemployeeForm.innerHTML = `\n<label>Name:\n  <input name=\"name\" type=\"text\" data-qa=\"name\">\n</label>\n<label>Position:\n  <input name=\"position\" type=\"text\" data-qa=\"position\">\n</label>\n<label>Office\n  <select name=\"office\" data-qa=\"office\">\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\">Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>\n  </select>\n</label>\n<label>\n  Age: <input name=\"age\" type=\"number\" data-qa=\"age\">\n</label>\n<label>Salary:\n  <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n</label>\n<button type=\"submit\"> Save to table</button>\n`;\ndocument.body.append(employeeForm);\n\n// // ================= SORTING TABLE =======================\nconst tableBody = document.querySelector('tbody');\nconst heads = document.querySelectorAll('th');\nconst arrTable = [];\nlet sorted;\nlet sortColumn;\n\nconst getRows = () => {\n  arrTable.splice(0, arrTable.length);\n\n  [...tableBody.children].forEach(row => {\n    arrTable.push({\n      name: row.children[0].innerText,\n      position: row.children[1].innerText,\n      office: row.children[2].innerText,\n      age: row.children[3].innerText,\n      salary: row.children[4].innerText,\n    });\n  });\n};\n\nconst sortTable = (sortedBy, target) => {\n  if (target.textContent !== sorted) {\n    switch (sortedBy) {\n      case 'names':\n        arrTable.sort((a, b) => a.name.localeCompare(b.name));\n        break;\n\n      case 'positions':\n        arrTable.sort((a, b) => a.position.localeCompare(b.position));\n        break;\n\n      case 'offices':\n        arrTable.sort((a, b) => a.office.localeCompare(b.office));\n        break;\n\n      case 'ages':\n        arrTable.sort((a, b) => a.age - b.age);\n        break;\n\n      case 'salaries':\n        arrTable.sort((a, b) => parseFloat(a.salary.slice(1))\n        - parseFloat(b.salary.slice(1)));\n        break;\n    }\n  }\n\n  if (target.textContent === sorted) {\n    arrTable.reverse();\n  } else {\n    sorted = target.textContent;\n  }\n\n  [...tableBody.children].forEach((row, index) => {\n    row.children[0].innerText = arrTable[index].name;\n    row.children[1].innerText = arrTable[index].position;\n    row.children[2].innerText = arrTable[index].office;\n    row.children[3].innerText = arrTable[index].age;\n    row.children[4].innerText = arrTable[index].salary;\n  });\n};\n\nheads.forEach(item => {\n  if (item.closest('thead')) {\n    item.addEventListener('click', (e) => {\n      switch (e.target.innerText) {\n        case 'Name':\n          sortColumn = 'names';\n          break;\n\n        case 'Position':\n          sortColumn = 'positions';\n          break;\n\n        case 'Office':\n          sortColumn = 'offices';\n          break;\n\n        case 'Age':\n          sortColumn = 'ages';\n          break;\n\n        case 'Salary':\n          sortColumn = 'salaries';\n          break;\n      }\n      getRows();\n      sortTable(sortColumn, e.target);\n    });\n  }\n});\n\n// ================= ACTIVE ROW =================\ntableBody.addEventListener('click', (e) => {\n  [...tableBody.children].forEach(row => {\n    row.classList.remove('active');\n  });\n  e.target.parentElement.classList.add('active');\n});\n\n// ================= FORM VALIDATION & NOTIFICATION =======================\nlet isValid = false;\n\nconst pushNotification = (title, description, type,\n  posTop = 450, posRight = 250) => {\n  const body = document.querySelector('body');\n  const block = document.createElement('div');\n  const header = document.createElement('h2');\n  const text = document.createElement('p');\n\n  text.innerText = description;\n  header.innerText = title;\n  block.classList.add('notification', type);\n  block.setAttribute('data-qa', 'notification');\n  header.classList.add('title');\n  block.append(header, text);\n  body.append(block);\n\n  header.style.fontSize = '18px';\n  block.style.top = `${posTop}px`;\n  block.style.right = `${posRight}px`;\n\n  setTimeout(() => block.remove(), 2000);\n};\n\nconst focusInvalidField = (field) => {\n  employeeForm.children[field].firstElementChild\n    .addEventListener('focus', (e) => {\n      e.target.style.outlineColor = '#FF0000';\n    });\n  employeeForm.children[field].focus();\n};\n\nconst validateForm = (data) => {\n  if (data.get('name').length < 4) {\n    focusInvalidField(0);\n\n    pushNotification(\n      'Name is not correct',\n      'Your name need to has less more than 4 letters.',\n      'error');\n\n    isValid = false;\n  } else if (data.get('position') === '') {\n    focusInvalidField(1);\n\n    pushNotification(\n      'Position is not correct',\n      'Position need to be not empty.',\n      'error');\n\n    isValid = false;\n  } else if (data.get('age') < 18 || data.get('age') > 90) {\n    focusInvalidField(3);\n\n    pushNotification(\n      'Age is not correct',\n      'Your age need to be more than 17 and less than 91.',\n      'error');\n\n    isValid = false;\n  } else if (data.get('salary') === '') {\n    focusInvalidField(4);\n\n    pushNotification(\n      'Salary is not correct',\n      'Salary need to be not empty.',\n      'error');\n\n    isValid = false;\n  } else {\n    isValid = true;\n  }\n};\n\n// ================= SENDING FORM DATA TO TABLE =======================\nemployeeForm.addEventListener('submit', (e) => {\n  const data = new FormData(employeeForm);\n  const salaryResult = `$${Number(data.get('salary')).toLocaleString('de-DE')}`;\n\n  e.preventDefault();\n  validateForm(data);\n\n  if (!isValid) {\n    return;\n  }\n\n  const newRow = tableBody.insertRow();\n\n  newRow.insertCell(0).innerText = data.get('name');\n  newRow.insertCell(1).innerText = data.get('position');\n  newRow.insertCell(2).innerText = data.get('office');\n  newRow.insertCell(3).innerText = data.get('age');\n  newRow.insertCell(4).innerText = salaryResult.split('.').join(',');\n\n  employeeForm.reset();\n\n  pushNotification(\n    'Validation Success',\n    'Employee is successfully added',\n    'success');\n});\n\n// ================= CHANGING FIELD =================\nconst cells = document.querySelectorAll('td');\nconst indexCompare = [];\nlet validCell;\n\nconst changeCellOnInput = (e, prev) => {\n  let cellWidth = getComputedStyle(e.target).width;\n\n  switch (e.target.cellIndex) {\n    case 0:\n    case 1:\n      e.target.innerHTML\n        = `<input type=\"text\" class=\"cell-input\" placeholder=\"${prev}\">`;\n      break;\n\n    case 2:\n      e.target.innerHTML\n      = `\n    <select class=\"cell-input\">\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n      `;\n      document.querySelector('select.cell-input').value = prev;\n      break;\n\n    case 3:\n    case 4:\n      e.target.innerHTML\n      = `<input type=\"number\" class=\"cell-input\" placeholder=\"${prev}\">`;\n      cellWidth = `${parseFloat(cellWidth) + 30}px`;\n      break;\n  }\n\n  document.querySelector('.cell-input').style.width = cellWidth;\n  e.target.firstElementChild.focus();\n};\n\nconst editCells = (el, prev) => {\n  const newText = el.target.firstElementChild.value;\n\n  if (newText === '' || newText === '0') {\n    el.target.innerHTML = prev;\n  } else {\n    el.target.cellIndex !== 4\n      ? el.target.innerHTML = newText\n      : el.target.innerHTML = `\n        $${Number(newText).toLocaleString('de-DE').split('.').join(',')}\n      `;\n\n    if (el.target.cellIndex !== 2) {\n      pushNotification(\n        'Validation Success',\n        'Employee is successfully edited',\n        'success');\n    }\n  }\n};\n\nconst validateCell = (e) => {\n  const input = document.querySelector('.cell-input');\n  const getValidCell = () => {\n    e.target.firstElementChild.focus();\n    e.target.style.border = '2px solid #FF0000';\n    validCell = true;\n  };\n\n  validCell = false;\n\n  if (!input.value.length) {\n    return validCell;\n  }\n\n  if (e.target.cellIndex === 0) {\n    if (input.value.length < 4) {\n      getValidCell();\n\n      return pushNotification(\n        'Name is not correct',\n        'Your name need to has less more than 4 letters.',\n        'error',);\n    }\n  } else if (e.target.cellIndex === 3) {\n    if (input.value < 18 || input.value > 90) {\n      getValidCell();\n\n      return pushNotification(\n        'Age is not correct',\n        'Your age need to be more than 17 and less than 91.',\n        'error');\n    }\n  } else {\n    return validCell;\n  }\n};\n\nconst saveChangesToTable = (e, prev) => {\n  validateCell(e);\n\n  if (!validCell) {\n    e.target.style.border = 'none';\n    indexCompare.length = 0;\n\n    return editCells(e, prev);\n  }\n};\n\ncells.forEach((cell, index) => {\n  cell.addEventListener('dblclick', (e) => {\n    indexCompare.push(index);\n\n    if (indexCompare[0] !== index) {\n      return pushNotification(\n        'Unfinished edit',\n        'You cannot edit another cell, while this has errors',\n        'error',\n        580);\n    }\n\n    const prevText = e.target.innerText;\n\n    changeCellOnInput(e, prevText);\n\n    const field = e.target.firstElementChild;\n\n    field.addEventListener('blur', () => {\n      saveChangesToTable(e, prevText);\n    });\n\n    field.addEventListener('keyup', (ev) => {\n      if (ev.key === 'Enter') {\n        field.blur();\n      }\n    });\n  });\n});\n"]}